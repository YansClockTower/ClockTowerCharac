<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>{{ edition_name }} - {{ version }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/common.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/view_edition.css') }}">
    <style>
    @font-face {
        font-family: "FZHY";
        font-weight: 400;
        src: url("{{ url_for('static', filename='font/fzhy_GBK.TTF') }}") format("truetype");
        font-display: swap;
    }
    /* 让 <a> 链接像 div 一样占满整个格子 */
.item-link {
    text-decoration: none;
    color: inherit;
    display: block;
    text-decoration: none;
}

/* 卡片基础样式 */
.item {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    border-radius: 8px;
}

/* 悬停效果：放大+阴影 */
.item:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
}

    </style>
</head>
<body>
<div class="content_body">

    <div style="display: flex; justify-content: center;">
        <div style="width: 100vw; align-items: center;">
            <img style="height: 120px;" src="{{ logo }}">
            <div style="text-align: left; font-size: 14px;">
                剧本作者：{{ author }}<br>
                支持人数：{{ minPlayer if minPlayer else '7'}}-{{maxPlayer if maxPlayer else '15'}}人
            </div>
        </div>

        {% if state %}
        <div class="statement">
            <b>{{ state.name }}</b><br><br>
            {{ state.description }}
        </div>
        {% endif %}
    </div>

    <hr>

<div id="character_content">
    {% for team_label, team_color, chars in ordered_teams %}
    <div class="team-section">
        <!-- 标题 + 分割线 -->
        <div class="splitl-bar">
            <div class="splitl-title" style="color: {{ team_color }}">{{ team_label }}</div>
            <div class="splitl-line" style="background-color: {{ team_color }}"></div>
        </div>

        <!-- grid 网格 -->
        <div class="team-grid">
            {% for item in chars %}
            <a href="/view/{{ item.id }}" class="item-link">
                <div class="item"
                    data-name="{{ item.name }}"
                    data-team="{{ item.team }}"
                    data-tag="{{ (item.tags or []) | join('_') }}_">
                    <img src="{{ item.image }}"
                        alt="{{ item.name }}"
                        onerror="this.onerror=null; this.src='https://111.229.112.80/editions/unknown.png';">
                    <p>
                        <b>{{ item.name }}</b><br>
                        {{ item.ability }}
                    </p>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
</div>



    {% include 'night_order.html' %}

    <div class="left-fixed">
        <div class="side-icon"><img src="{{ url_for('static', filename='img/night.jpg') }}"></div>
        <div class="side-icon"><img src="{{ url_for('static', filename='img/minion.jpg') }}"></div>
        <div class="side-icon"><img src="{{ url_for('static', filename='img/demon.jpg') }}"></div>
        {% for charac in first_night %}
        <div class="side-icon">
            <img src="{{ character_dict[charac].image }}"
                 onerror="this.onerror=null; this.src='https://111.229.112.80/editions/unknown.png';">
        </div>
        {% endfor %}
        <div class="side-icon"><img src="{{ url_for('static', filename='img/day.jpg') }}"></div>
    </div>

    <div class="right-fixed">
        <div class="side-icon"><img src="{{ url_for('static', filename='img/night.jpg') }}"></div>
        {% for charac in other_night %}
        <div class="side-icon">
            <img src="{{ character_dict[charac].image }}"
                 onerror="this.onerror=null; this.src='https://111.229.112.80/editions/unknown.png';">
        </div>
        {% endfor %}
        <div class="side-icon"><img src="{{ url_for('static', filename='img/day.jpg') }}"></div>
    </div>

    <p class="text-center"><br>每个夜晚* 表示从第二个夜晚开始生效。<br></p>
    <hr>
    <p class="text-center text-sm text-gray-500">
        {{ edition_name }}_{{ version }} | generated by EditionPdf Generator
    </p>

</div>

<script>
    function create_splitline(name, color){
        const container = document.createElement('div');
        container.className = 'splitl-bar';
        const title = document.createElement('div');
        title.innerHTML = name;
        title.style.color = color;
        title.className = 'splitl-title';
        const divline = document.createElement('div');
        divline.style.backgroundColor = color;
        divline.className = 'splitl-line';
        container.appendChild(title);
        container.appendChild(divline);
        return container;
    }
</script>

</body>
</html>
